# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–≥–æ–¥–µ

## –û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ –ø–æ–≥–æ–¥–µ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –æ–¥–µ–∂–¥–µ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –Ω–∞–ø–∏—Å–∞—Ç—å "–ü—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–∞ –ú–æ—Å–∫–≤–∞" –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–≥–æ–¥–µ –ø–æ –ú–æ—Å–∫–≤–µ.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1.1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (`WeatherSubscriptionDatabase`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤
- **–¢–∞–±–ª–∏—Ü–∞ `weather_subscriptions`**:
  - `id` (INTEGER PRIMARY KEY)
  - `city` (TEXT NOT NULL) - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
  - `interval_minutes` (INTEGER) - –∏–Ω—Ç–µ—Ä–≤–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
  - `is_active` (INTEGER DEFAULT 1) - –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞
  - `created_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP)
  - `last_notified_at` (TIMESTAMP) - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - `next_notification_at` (TIMESTAMP) - –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### 1.2. –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (`WeatherSubscriptionService`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞)
- **–ú–µ—Ç–æ–¥—ã**:
  - `addSubscription(city: String, intervalMinutes: Int = 60): Boolean`
  - `removeSubscription(city: String): Boolean`
  - `getActiveSubscriptions(): List<WeatherSubscription>`
  - `updateLastNotificationTime(city: String)`
  - `getSubscriptionsDueForNotification(): List<WeatherSubscription>`

#### 1.3. –°–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–¥–µ–∂–¥–µ (`ClothingRecommendationService`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–¥–µ–∂–¥–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ—Ç–æ–¥—ã**:
  - `generateRecommendation(weather: WeatherApiResponse): String`
  - **–õ–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**:
    - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ < 0¬∞C: "–û—á–µ–Ω—å —Ö–æ–ª–æ–¥–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: —Ç–µ–ø–ª–∞—è –∑–∏–º–Ω—è—è –∫—É—Ä—Ç–∫–∞, —à–∞–ø–∫–∞, –ø–µ—Ä—á–∞—Ç–∫–∏, —à–∞—Ä—Ñ, —Ç–µ–ø–ª–∞—è –æ–±—É–≤—å"
    - 0-10¬∞C: "–•–æ–ª–æ–¥–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –∫—É—Ä—Ç–∫–∞, —Ç–µ–ø–ª–∞—è –æ–¥–µ–∂–¥–∞, —à–∞–ø–∫–∞"
    - 10-20¬∞C: "–ü—Ä–æ—Ö–ª–∞–¥–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –ª–µ–≥–∫–∞—è –∫—É—Ä—Ç–∫–∞ –∏–ª–∏ —Å–≤–∏—Ç–µ—Ä"
    - 20-25¬∞C: "–ö–æ–º—Ñ–æ—Ä—Ç–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –ª–µ–≥–∫–∞—è –æ–¥–µ–∂–¥–∞, –º–æ–∂–Ω–æ –±–µ–∑ –∫—É—Ä—Ç–∫–∏"
    - > 25¬∞C: "–¢–µ–ø–ª–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –ª–µ–≥–∫–∞—è –æ–¥–µ–∂–¥–∞, –≥–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä –æ—Ç —Å–æ–ª–Ω—Ü–∞"
    - –î–æ–∂–¥—å: "+ –∑–æ–Ω—Ç –∏–ª–∏ –¥–æ–∂–¥–µ–≤–∏–∫"
    - –°–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä (> 20 –∫–º/—á): "+ –≤–µ—Ç—Ä–æ–≤–∫–∞"
    - –í—ã—Å–æ–∫–∏–π UV (> 6): "+ —Å–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–µ –æ—á–∫–∏ –∏ –∫—Ä–µ–º"

#### 1.4. –°–µ—Ä–≤–∏—Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (`WeatherNotificationScheduler`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: Kotlin Coroutines —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `CoroutineScope` –∏ `delay()`
- **–ê–ª–≥–æ—Ä–∏—Ç–º**:
  1. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  2. –ö–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏
  3. –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–∏, —É –∫–æ—Ç–æ—Ä–æ–π `next_notification_at <= —Ç–µ–∫—É—â–µ–µ_–≤—Ä–µ–º—è`:
     - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–≥–æ–¥—É —á–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç
     - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–µ–∂–¥–µ
     - –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ —á–∞—Ç (—á–µ—Ä–µ–∑ `MessageDatabase`)
     - –û–±–Ω–æ–≤–ª—è–µ—Ç `last_notified_at` –∏ `next_notification_at`
  4. –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ—Ä—É—Ç–∏–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫

#### 1.5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Dialog Service
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- **–ü–æ–¥—Ö–æ–¥**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
- **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è**:
  - "–ü—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–∞ X" ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
  - "–ü–µ—Ä–µ—Å—Ç–∞–Ω—å –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è X" ‚Üí —É–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
  - "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ø–æ–≥–æ–¥—É" ‚Üí —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
  - "–ò–∑–º–µ–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è X –Ω–∞ N –º–∏–Ω—É—Ç" ‚Üí –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª

#### 1.6. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ (`WeatherSubscriptionCommandHandler`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- **–ú–µ—Ç–æ–¥—ã**:
  - `parseCommand(message: String): SubscriptionCommand?`
  - `executeCommand(command: SubscriptionCommand): String`
- **–¢–∏–ø—ã –∫–æ–º–∞–Ω–¥**:
  - `AddSubscription(city: String, intervalMinutes: Int?)`
  - `RemoveSubscription(city: String)`
  - `ListSubscriptions`
  - `UpdateInterval(city: String, intervalMinutes: Int)`

---

## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª**: `WeatherSubscriptionDatabase.kt` (–Ω–æ–≤—ã–π)

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `WeatherSubscriptionDatabase` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `MessageDatabase`
2. –¢–∞–±–ª–∏—Ü–∞ `weather_subscriptions`:
   ```sql
   CREATE TABLE IF NOT EXISTS weather_subscriptions (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       city TEXT NOT NULL UNIQUE,
       interval_minutes INTEGER DEFAULT 60,
       is_active INTEGER DEFAULT 1,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
       last_notified_at TIMESTAMP,
       next_notification_at TIMESTAMP
   )
   ```
3. –ú–µ—Ç–æ–¥—ã:
   - `addSubscription(city, intervalMinutes)`
   - `removeSubscription(city)`
   - `getActiveSubscriptions()`
   - `updateNotificationTime(city, nextNotificationTime)`
   - `getSubscriptionsDueForNotification()`

**–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö**: `WeatherSubscription.kt` (–Ω–æ–≤—ã–π)
```kotlin
data class WeatherSubscription(
    val id: Int,
    val city: String,
    val intervalMinutes: Int,
    val isActive: Boolean,
    val createdAt: Long,
    val lastNotifiedAt: Long?,
    val nextNotificationAt: Long?
)
```

---

### –≠—Ç–∞–ø 2: –°–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–¥–µ–∂–¥–µ

**–§–∞–π–ª**: `ClothingRecommendationService.kt` (–Ω–æ–≤—ã–π)

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `ClothingRecommendationService`
2. –ú–µ—Ç–æ–¥ `generateRecommendation(weather: WeatherApiResponse): String`
3. –õ–æ–≥–∏–∫–∞:
   - –ê–Ω–∞–ª–∏–∑ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (`tempC`)
   - –ê–Ω–∞–ª–∏–∑ —É—Å–ª–æ–≤–∏–π (–¥–æ–∂–¥—å, —Å–Ω–µ–≥)
   - –ê–Ω–∞–ª–∏–∑ –≤–µ—Ç—Ä–∞ (`windKph`)
   - –ê–Ω–∞–ª–∏–∑ UV –∏–Ω–¥–µ–∫—Å–∞ (`uv`)
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞**:
```
üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 15¬∞C
‚òÅÔ∏è –£—Å–ª–æ–≤–∏—è: –û–±–ª–∞—á–Ω–æ
üí® –í–µ—Ç–µ—Ä: 12 –∫–º/—á
üëï –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–µ–∂–¥–µ: –ü—Ä–æ—Ö–ª–∞–¥–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ª–µ–≥–∫–∞—è –∫—É—Ä—Ç–∫–∞ –∏–ª–∏ —Å–≤–∏—Ç–µ—Ä. 
   –ü—Ä–∏ –≤–µ—Ç—Ä–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ç—Ä–æ–≤–∫—É.
```

---

### –≠—Ç–∞–ø 3: –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

**–§–∞–π–ª**: `WeatherSubscriptionService.kt` (–Ω–æ–≤—ã–π)

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `WeatherSubscriptionService`
2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   - `WeatherSubscriptionDatabase`
   - `McpClientManager` (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã)
   - `ClothingRecommendationService`
3. –ú–µ—Ç–æ–¥—ã:
   - `addSubscription(city, intervalMinutes)`
   - `removeSubscription(city)`
   - `getAllSubscriptions()`
   - `getSubscriptionsDueForNotification()`
   - `sendNotificationForSubscription(subscription)`

---

### –≠—Ç–∞–ø 4: –ü–∞—Ä—Å–µ—Ä –∫–æ–º–∞–Ω–¥

**–§–∞–π–ª**: `WeatherSubscriptionCommandHandler.kt` (–Ω–æ–≤—ã–π)

1. –°–æ–∑–¥–∞—Ç—å sealed class `SubscriptionCommand`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
3. –ú–µ—Ç–æ–¥—ã:
   - `parseCommand(message: String): SubscriptionCommand?`
   - `executeCommand(command: SubscriptionCommand, service: WeatherSubscriptionService): String`

**–ü—Ä–∏–º–µ—Ä—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**:
- "–ø—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –¥–ª—è [–≥–æ—Ä–æ–¥]" / "–ø—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –≤ [–≥–æ—Ä–æ–¥]"
- "–ø–µ—Ä–µ—Å—Ç–∞–Ω—å –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è [–≥–æ—Ä–æ–¥]"
- "–ø–æ–∫–∞–∂–∏ –ø–æ–¥–ø–∏—Å–∫–∏" / "–º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏"
- "–∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è [–≥–æ—Ä–æ–¥] [N] –º–∏–Ω—É—Ç"

---

### –≠—Ç–∞–ø 5: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–§–∞–π–ª**: `WeatherNotificationScheduler.kt` (–Ω–æ–≤—ã–π)

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `WeatherNotificationScheduler`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CoroutineScope` –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã
3. –ê–ª–≥–æ—Ä–∏—Ç–º:
   ```kotlin
   suspend fun start() {
       while (isActive) {
           val dueSubscriptions = subscriptionService.getSubscriptionsDueForNotification()
           dueSubscriptions.forEach { subscription ->
               sendNotification(subscription)
           }
           delay(60000) // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
       }
   }
   ```
4. –ú–µ—Ç–æ–¥ `sendNotification(subscription)`:
   - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–≥–æ–¥—É —á–µ—Ä–µ–∑ MCP
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `MessageDatabase` –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç "system" –∏–ª–∏ "assistant"
   - –í—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å (–µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ)

---

### –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ChatSession

**–§–∞–π–ª**: `ChatSession.kt` (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)

1. –î–æ–±–∞–≤–∏—Ç—å `WeatherSubscriptionCommandHandler` –≤ `ChatSession`
2. –í –º–µ—Ç–æ–¥–µ `sendUserMessage()`:
   - –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
   - –ï—Å–ª–∏ –¥–∞ - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   - –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AI –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥ –ø–æ–¥–ø–∏—Å–∫–∏
- AI –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π tool call –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π MCP tool: `manage_weather_subscription`

---

### –≠—Ç–∞–ø 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Main.kt

**–§–∞–π–ª**: `Main.kt` (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `WeatherSubscriptionDatabase`
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `WeatherSubscriptionService`
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `WeatherNotificationScheduler`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ —Ñ–æ–Ω–µ:
   ```kotlin
   val scheduler = WeatherNotificationScheduler(...)
   scope.launch {
       scheduler.start()
   }
   ```
5. –ü–µ—Ä–µ–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –ø–æ–¥–ø–∏—Å–æ–∫ –≤ `ChatSession`

---

### –≠—Ç–∞–ø 8: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

**–§–∞–π–ª**: `DomainModels.kt` (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)

–û–±–Ω–æ–≤–∏—Ç—å `DEFAULT_SYSTEM_PROMPT`:
```
–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –æ—Ç–≤–µ—á–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, —Ç—ã –º–æ–∂–µ—à—å —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ –ø–æ–≥–æ–¥—É:
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ü—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã"), 
  –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–≥–æ–¥—É, –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö, –ø–æ–∫–∞–∂–∏ —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫.
```

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥: MCP Tool –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫

–í–º–µ—Å—Ç–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–¥–µ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π MCP tool:

**Tool**: `manage_weather_subscription`
- `action`: "add" | "remove" | "list" | "update_interval"
- `city`: –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `interval_minutes`: –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –º–∏–Ω—É—Ç–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ tools
- AI —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å tool
- –ù–µ –Ω—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/main/kotlin/
‚îú‚îÄ‚îÄ Main.kt (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ ChatSession.kt (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ DomainModels.kt (–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ MessageDatabase.kt (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ McpClientManager.kt (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ WeatherSubscriptionDatabase.kt (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ WeatherSubscription.kt (–Ω–æ–≤—ã–π - –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö)
‚îú‚îÄ‚îÄ WeatherSubscriptionService.kt (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ ClothingRecommendationService.kt (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ WeatherSubscriptionCommandHandler.kt (–Ω–æ–≤—ã–π)
‚îî‚îÄ‚îÄ WeatherNotificationScheduler.kt (–Ω–æ–≤—ã–π)
```

---

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. ‚úÖ **–≠—Ç–∞–ø 1**: –°–æ–∑–¥–∞—Ç—å `WeatherSubscriptionDatabase` –∏ –º–æ–¥–µ–ª—å `WeatherSubscription`
2. ‚úÖ **–≠—Ç–∞–ø 2**: –°–æ–∑–¥–∞—Ç—å `ClothingRecommendationService`
3. ‚úÖ **–≠—Ç–∞–ø 3**: –°–æ–∑–¥–∞—Ç—å `WeatherSubscriptionService`
4. ‚úÖ **–≠—Ç–∞–ø 4**: –°–æ–∑–¥–∞—Ç—å `WeatherSubscriptionCommandHandler` (–∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å MCP tool)
5. ‚úÖ **–≠—Ç–∞–ø 5**: –°–æ–∑–¥–∞—Ç—å `WeatherNotificationScheduler`
6. ‚úÖ **–≠—Ç–∞–ø 6**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `ChatSession`
7. ‚úÖ **–≠—Ç–∞–ø 7**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `Main.kt`
8. ‚úÖ **–≠—Ç–∞–ø 8**: –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

---

## –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
üå§Ô∏è –ü–æ–≥–æ–¥–∞ –¥–ª—è –ú–æ—Å–∫–≤—ã
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ú–æ—Å–∫–≤–∞, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –†–æ—Å—Å–∏—è
üïê –í—Ä–µ–º—è: 2024-01-15 14:30

üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 15¬∞C (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 13¬∞C)
‚òÅÔ∏è –£—Å–ª–æ–≤–∏—è: –û–±–ª–∞—á–Ω–æ
üí® –í–µ—Ç–µ—Ä: 12 –∫–º/—á, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –°–ó
üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: 65%
‚òî –û—Å–∞–¥–∫–∏: 0 –º–º
‚òÄÔ∏è UV –∏–Ω–¥–µ–∫—Å: 3

üëï –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–µ–∂–¥–µ:
   –ü—Ä–æ—Ö–ª–∞–¥–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ª–µ–≥–∫–∞—è –∫—É—Ä—Ç–∫–∞ –∏–ª–∏ —Å–≤–∏—Ç–µ—Ä.
   –ü—Ä–∏ –≤–µ—Ç—Ä–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ç—Ä–æ–≤–∫—É.
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑
- –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω - –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –∏ —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ë–î - –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –¥–µ–ª–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ MCP (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ —á–∞—Ç: "–ü—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å –≤ –ë–î
3. –î–æ–∂–¥–∞—Ç—å—Å—è –≤—Ä–µ–º–µ–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å `next_notification_at` –≤ –ë–î –¥–ª—è —Ç–µ—Å—Ç–∞)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–µ–∂–¥–µ
6. –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É: "–ü–µ—Ä–µ—Å—Ç–∞–Ω—å –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã"
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª–∏—Å—å

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —á–µ—Ä–µ–∑ —á–∞—Ç**: "–ü—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç"
2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏**: "–ü—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è"
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è**: "–ü—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã –≤ 8:00 –∏ 18:00"
4. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏**: "–ü—Ä–∏—Å—ã–ª–∞–π –ø–æ–≥–æ–¥—É –¥–ª—è –≤—Å–µ—Ö –º–æ–∏—Ö –≥–æ—Ä–æ–¥–æ–≤"
5. **–≠–∫—Å–ø–æ—Ä—Ç –ø–æ–¥–ø–∏—Å–æ–∫**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ —Ñ–∞–π–ª

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç:
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ –ë–î
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–¥–µ–∂–¥–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —á–µ—Ä–µ–∑ —á–∞—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Kotlin Coroutines –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É MCP –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã.

